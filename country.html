
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>INCB Data Browser</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.6/yeti/bootstrap.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.6/yeti/bootstrap.min.css" rel="stylesheet">
    <script>
     var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-23019901-1']);
      _gaq.push(['_setDomainName', "bootswatch.com"]);
        _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

     (function() {
       var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
       ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
       var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
     })();

    </script>
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script>
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="http://d3js.org/topojson.v1.min.js"></script>
    <link href="assets/css/axis.css" rel="stylesheet">
    <link href="assets/css/select.css" rel="stylesheet">
    <link href="assets/css/range.css" rel="stylesheet">
    <link href="assets/css/path.css" rel="stylesheet">
    <link href="assets/css/ts.css" rel="stylesheet">

    <script src="assets/js/countries.js"></script>
    <script src="assets/js/incb.js"></script>
    <script src="assets/js/incb_histo.js"></script>
    <script src="assets/js/incbMDS.js"></script>
    <script src="assets/js/incb_histo_levels.js"></script>

    <script src="assets/js/data.js"></script>
    <script src="assets/js/histo.js"></script>
    <script src="assets/js/hover.js"></script>
    <script src="assets/js/lines.js"></script>
    <script src="assets/js/map.js"></script>
    <script src="assets/js/mds.js"></script>
    <script src="assets/js/scales.js"></script>
    <script src="assets/js/scatter.js"></script>
    <script src="assets/js/table.js"></script>
    <script src="assets/js/ts.js"></script>
    <script src="assets/js/webpage.js"></script>
  </head>

  <body>
  <br>
  <br>

    <div class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a href="https://bootswatch.com/" class="navbar-brand">INCB Data Browser</a>
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div class="navbar-collapse collapse" id="navbar-main">
          <ul class="nav navbar-nav">
            <li><a href="index.html">Home</a></li>
              <li><a href="country.html">Opioid Maps</a></li>
              <li><a href="region.html">Regional Trends</a></li>
            <li><a href="cognostics.html">Cognostics</a></li>
          </ul>

          <ul class="nav navbar-nav navbar-right">
            <li><a href="charts.html">All Charts</a></li>
          </ul>

        </div>
      </div>
    </div>




    <div class="container">

      <div class="page-header" id="banner">
        <div class="row">
          <div class="col-lg-12 col-md-7 col-sm-6">
          <a name="country"></a>
            <h1>Opioid Consumption</h1>
              <h2>Country-level trends: XXXX-XXXX</h2>
              <p class="text-muted">  You can see new series by hovering over countries. You can
      see different years by moving the slider (below the map), and
      different drugs by changing the selection </p>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12 col-md-6 col-sm-6">

              <!-- Chart 1
      ================================================== -->

  <div class="col-xs-5">
      <form id="mapSelect" class="well">
      <label id="mapDrugInput">
	  Opioid
	  <select class="chzn-select" id="drugSelect"></select>
      </label>
      <label id="mapYearInput">
	  <text>Year: 1989</text>
	  <input type="range" min="1989" max="2013" value="1989" id="slider", oninput="updateMapColors()">
      </label>
      </form>
  </div>
  <div class="row">
    <div id="map">
    </div>
  </div>

<!--
  <hr>
  <a name="region"></a>
  <h2>Opiod Consumption by Region</h2>
  <p> You can select different drugs / regions using the selections below.
      Moving the mouse over a series highlights it, the same function should
      be able to populate a table with current country info. </p>
  <div class="row-fluid", id="mapSelect">
      <div class="span12", id="tsRegions"></div>
  </div>
  <div class ="row-fluid" id="tsSelect">
      <div class="span2">
    <select class="chzn-select" multiple="true" id="drugSelect"></select>
      </div>
      <div class="span5">
    <select class="chzn-select" multiple="true" id="regionSelect"></select>
      </div>
  </div>

  <hr>
  <h2>Cognostics</h2>
  <a name="cognostics"></a>
  <p> Select different cognostics using the input. Hovering over circles prints
      the corresponding series on the side. Maybe we should make the points on
      hover.
  </p>
  <div class="row-fluid">
      <div class="span6", id="cognostics"></div>
      <div class="span6", id="cognosticsSeries"></div>
  </div>
  <div class ="row-fluid" id="cogSelections">
      <div class="span6", id="cognosticsTable"></div>
      <div class="span2">
    <select class="chzn-select" id="cogSelect"></select>
      </div>
      <div class="span2">
    <select class="chzn-select" multiple="true" id="drugSelect"></select>
      </div>
      <div class="span2">
    <select class="chzn-select" multiple="true" id="regionSelect"></select>
      </div>
  </div>

  <div class="row-fluid">
      <div class="span6", id="mdsSeries"></div>
      <div class="span6", id="mdsScatter"></div>
  </div>
  <div class ="row-fluid" id="mdsSelect">
      <div class="span6", id="mdsTable"></div>
      <div class="span3">
    <select class="chzn-select" multiple="true" id="drugSelect"></select>
      </div>
      <div class="span3">
    <select class="chzn-select" multiple="true" id="regionSelect"></select>
      </div>
  </div>

  -->



 <hr>      

      <footer>
        <div class="row">
          <div class="col-lg-12">

            <ul class="list-unstyled">
              <li class="pull-right"><a href="#top">Back to top</a></li>
              <li><a href="http://news.bootswatch.com/" onclick="pageTracker._link(this.href); return false;">Blog</a></li>
              <li><a href="http://feeds.feedburner.com/bootswatch">RSS</a></li>
              <li><a href="https://twitter.com/bootswatch">Twitter</a></li>
              <li><a href="https://github.com/thomaspark/bootswatch/">GitHub</a></li>
              <li><a href="https://bootswatch.com/help/#api">API</a></li>
              <li><a href="https://bootswatch.com/help/#support">Support</a></li>
            </ul>

          </div>
        </div>
      </footer>


    </div>



  <script type="text/javascript">
   // draw for the first time
   const map = $("#map");
   const ts = $("#ts");
   const tsRegions = $("#tsRegions");
   const cognostics = $("#cognostics");
   const mds = $("#mdsScatter");
   const mdsSeries = $("#mdsSeries");

   setupSVG("#mdsScatter", .95 * mds.width(), .6 * mds.width(), "#F7F7F7");
   setupSVG("#mdsSeries", .95 * mdsSeries.width(), .6 * mdsSeries.width(), "#F7F7F7");
   setupMapVis(incb, countries, map.width(), .35 * map.width());
   setupSVG("#tsRegions", tsRegions.width(), 0.4 * tsRegions.width(), "#F7F7F7");
   setupSVG("#cognostics", cognostics.width(), 0.35 * cognostics.width(), "#F7F7F7");
   setupSVG("#cognosticsSeries", cognostics.width(), 0.35 * cognostics.width(), "#F7F7F7");

   makeTable("#cognosticsTable", ["group_id"]);
   makeTable("#mdsTable", ["group_id"]);

   // add selections for map
   allDrugs = Object.keys(incb[0].ts);
   allDrugs.shift();
   fillOptions("#mapSelect #drugSelect", allDrugs);
   $("#mapSelect #drugSelect").on("change", updateMapColors);

   // draw the map
   updateMapColors();

   // add selections for trends
   allSubregions = ["northern_africa", "middle_africa", "east_africa", "west_africa", "south_africa", "western_asia", "central_asia", "southern_asia", "east_asia", "southeast_asia", "australia_nz",  "melanesia", "polynesia",  "micronesia", "southern_europe","western_europe", "northern_europe", "eastern_europe", "central_america", "carribean", "south_america", "north_america"]
   fillOptions("#tsSelect #drugSelect", allDrugs);
   fillOptions("#tsSelect #regionSelect", allSubregions);
   $("#tsSelect #drugSelect").on("change", updateShownTS)
   $("#tsSelect #regionSelect").on("change", updateShownTS);

   // add selections for cognostics
   allRegions = ["asia", "africa", "americas", "europe", "oceania"]
   const allCogs = incb_histo[0].map(function(d) { return d["L1"] })
   fillOptions("#cogSelections #cogSelect", allCogs);
   fillOptions("#cogSelections #drugSelect", allDrugs);
   fillOptions("#cogSelections #regionSelect", allRegions);
   $("#cogSelections #regionSelect").on("change", updateCognostics);
   $("#cogSelections #cogSelect").on("change", updateCognostics);
   $("#cogSelections #drugSelect").on("change", updateCognostics);

   // add selections for mds
   fillOptions("#mdsSelect #drugSelect", allDrugs);
   fillOptions("#mdsSelect #regionSelect", allSubregions);
   $("#mdsSelect #drugSelect").on("change", updateMDS);
   $("#mdsSelect #regionSelect").on("change", updateMDS);

   drawMDS(d3.selectAll("#mdsScatter > svg"), incbMDS);
  </script>

  <script type="text/javascript">
   // use multiselect plugin
   $(function(){
       $(".chzn-select").chosen();
   });
  </script>

  <script type="text/javascript" src="../assets/js/bootstrap.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.4.2/chosen.jquery.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.4.2/chosen.css">
    </body>
</html>

